<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="来自Srinath@ImportSource"/>




  <meta name="keywords" content="architecture," />





  <link rel="alternate" href="/default" title="因为自知而敬畏, 因为敬畏而谦逊">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1" />



<link rel="canonical" href="https://aihai.github.io/2020/03/16/apache-30-architecture-principles/"/>


<meta name="description" content="来自Srinath@ImportSource">
<meta property="og:type" content="article">
<meta property="og:title" content="Apache架构师们遵循的30条设计原则">
<meta property="og:url" content="https://aihai.github.io/2020/03/16/apache-30-architecture-principles/index.html">
<meta property="og:site_name" content="因为自知而敬畏, 因为敬畏而谦逊">
<meta property="og:description" content="来自Srinath@ImportSource">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-03-16T09:56:16.693Z">
<meta property="article:modified_time" content="2020-03-16T15:25:51.185Z">
<meta property="article:author" content="AiHai">
<meta property="article:tag" content="architecture">
<meta name="twitter:card" content="summary">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> Apache架构师们遵循的30条设计原则 - 因为自知而敬畏, 因为敬畏而谦逊 </title>
  <meta name="generator" content="Hexo 4.2.0"></head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">因为自知而敬畏, 因为敬畏而谦逊</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                Archives
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          Apache架构师们遵循的30条设计原则
        
      </h1>

      <time class="post-time">
          3月 16 2020
      </time>
    </header>



    
            <div class="post-content">
            <p><strong>基本原则</strong></p>
<p><strong>原则1</strong>：KISS(Keep it simple,sutpid) 和保持每件事情都尽可能的简单。用最简单的解决方案来解决问题。</p>
<p><strong>原则2</strong>：YAGNI(You aren’t gonna need it)-不要去搞一些不需要的东西，需要的时候再搞吧。</p>
<p><strong>原则3</strong>：爬，走，跑。换句话说就是先保证跑通，然后再优化变得更好，然后继续优化让其变得伟大。迭代着去做事情，敏捷开发的思路。对于每个功能点，创建里程碑（最大两周），然后去迭代。</p>
<p><strong>原则4</strong>：创建稳定、高质量的产品的唯一方法就是自动化测试。所有的都可以自动化，当你设计时，不妨想想这一点。</p>
<p><strong>原则5</strong>：时刻要想投入产出比（ROI）。就是划得来不。</p>
<p><strong>原则6</strong>：了解你的用户，然后基于此来平衡你需要做哪些事情。不要花了几个月时间做了一个devops用户界面，最后你发现那些人只喜欢命令行。此原则是原则5的一个具体表现。</p>
<p><strong>原则7</strong>：设计和测试一个功能得尽可能的独立。当你做设计时，应该想想这一条。从长远来看这能给你解决很多问题，否则你的功能只能等待系统其他所有的功能都就绪了才能测试，这显然很不好。有了这个原则， 你的版本将会更加的顺畅。</p>
<p><strong>原则8</strong>：不要搞花哨的。我们都喜欢高端炫酷的设计。最后我们搞了很多功能和解决方案到我们的架构中，然后这些东西根本不会被用到。</p>
<p><strong>功能选择</strong></p>
<p><strong>原则9</strong>：不可能预测到用户将会如何使用我们的产品。所以要拥抱MVP（Minimal Viable Product），最小可运行版本。这个观点主要思想就是你挑几个很少的使用场景，然后把它搞出来，然后发布上线让用户使用，然后基于体验和用户反馈再决定下一步要做什么。</p>
<p><strong>原则10</strong>：尽可能的做较少的功能。当有疑问的时候，就不要去做，甚至干掉。很多功能从来不会被使用。最多留个扩展点就够了。</p>
<p><strong>原则11</strong>：等到有人提出再说（除非是影响核心流程，否则就等到需要的时候再去做）。</p>
<p><strong>原则12</strong>：有时候你要有勇气和客户说不。这时候你需要找到一个更好的解决方案来去解决。记住亨利福特曾经说过的 ：”如果我问人们他们需要什么，他们会说我需要一匹速度更快的马”。记住：你是那个专家，你要去引导和领导。要去做正确的事情，而不是流行的事情。最终用户会感谢你为他们提供了汽车。</p>
<p><strong>服务端设计和并发</strong></p>
<p><strong>原则13</strong>：要知道一个server是如何运行的，从硬件到操作系统，直到编程语言。优化IO调用的数量是你通往最好架构的首选之路。</p>
<p><strong>原则14</strong>：要了解Amdhal同步定律。在线程之间共享可变数据会让你的程序变慢。只在必要的时候才去使用并发的数据结构，只在必须使用同步（synchronization）的时候才去使用同步。如果要用锁，也要确保尽可能少的时间去hold住锁。如果要在加锁后做一些事情，要确保自己在锁内会做哪些事情。</p>
<p><strong>原则15</strong>：如果你的设计是一个无阻塞且事件驱动的架构，那么千万不要阻塞线程或者在这些线程中做一些IO操作，如果你做了，你的系统会慢的像骡子一样。</p>
<p><strong>分布式系统</strong></p>
<p><strong>原则16</strong>：无状态的系统的是可扩展的和直接的。任何时候都要考虑这一点，不要搞个不可扩展的，有状态的东东出来，这是起码的。</p>
<p><strong>原则17</strong>：保证消息只被传递一次，不管失败，这很难，除非你要在客户端和服务端都做控制。试着让你的系统更轻便（使用原则18）。你要知道大部分的承诺exactly-once-delivery的系统都是做了精简的。</p>
<p><strong>原则18</strong>：实现一个操作尽可能的幂等。这样的话就比较好恢复，而且你还处于至少一次传递（at least once delivery）的状态。</p>
<p><strong>原则19</strong>：知道CAP理论。可扩展的事务（分布式事务）是很难的。如果可能的的话，尽可能的使用补偿机制。RDBMS事务是无法扩展的。</p>
<p><strong>原则20</strong>：分布式一致性无法扩展，也无法进行组通信，也无法进行集群范围内的可靠通信。理想情况下最大的节点限制为8个节点。</p>
<p><strong>原则21</strong>：在分布式系统中，你永远无法避免延迟和失败。</p>
<p><strong>用户体验</strong></p>
<p><strong>原则22</strong>：要了解你的用户和清楚他们的目标。他们是新手、专家还是偶然的用户？他们了解计算机科学的程度。极客喜欢扩展点，开发者喜欢示例和脚本，而普通人则喜欢UI。</p>
<p><strong>原则23</strong>：最好的产品是不需要产品手册的。</p>
<p><strong>原则24</strong>：当你无法在两个选择中做决定的时候，请不要直接把这个问题通过提供配置选项的方式传递给用户。这样只能让用户更加的发懵。如果连你这个专家都无法选择的情况下，交给一个比你了解的还少的人这样合适吗？最好的做法的是每次都找到一个可行的选项；次好的做法是自动的给出选项，第三好的做法是增加一个配置参数，然后设置一个合理的默认值。</p>
<p><strong>原则25</strong>：总是要为配置设置一个合理的默认值。</p>
<p><strong>原则26</strong>：设计不良的配置会造成一些困扰。应该总是为配置提供一些示例值。</p>
<p><strong>原则27</strong>：配置值必须是用户能够理解和直接填写的。比如：不能让用户填写最大缓存条目的数量，而是应该让用户填写可被用于缓存的最大内存。</p>
<p><strong>原则28</strong>：如果输入了未知的配置要抛出错误。永远不要悄悄的忽略。悄悄的忽略配置错误往往是找bug花了数小时的罪魁祸首。</p>
<p><strong>艰难的问题</strong></p>
<p><strong>原则29</strong>：梦想着新的编程语言就会变得简单和明了，但往往要想真正掌握会很难。不要轻易的去换编程语言。</p>
<p><strong>原则30</strong>：复杂的拖拉拽的界面是艰难的，不要去尝试这样的效果，除非你准备好了10人年的团队。</p>

            </div>
          

    
      <footer class="post-footer">
		
		<div class="post-tags">
		  
			<a href="/tags/architecture/">architecture</a>
		  
		</div>
		

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2020/03/16/awesome-ssh/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Awesome SSH</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2020/03/16/hello-world/">
        <span class="next-text nav-default">Hello World</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
    2020
    <span class="footer-author">AiHai.</span>
    <span class="power-by">
        由 <a class="hexo-link" href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> and <a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear" target="_blank" rel="noopener">Polar Bear</a> 强力驱动
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
